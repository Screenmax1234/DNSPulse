<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DNS Speed Checker</title>
    <link rel="stylesheet" href="/static/styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <span class="logo-icon">‚ö°</span>
                <h1>DNS Speed Checker</h1>
            </div>
            <p class="tagline">Real-world DNS resolver benchmarking</p>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Configuration Panel -->
            <section class="config-panel glass-card">
                <h2>Configuration</h2>
                
                <div class="config-grid">
                    <!-- Resolvers -->
                    <div class="config-section">
                        <h3>Resolvers</h3>
                        <div class="resolver-list" id="resolver-list">
                            <!-- Populated by JS -->
                        </div>
                        <div class="custom-resolver">
                            <input type="text" id="custom-ip" placeholder="Custom IP (e.g., 192.168.1.1)">
                            <button class="btn btn-secondary" onclick="addCustomResolver()">+ Add</button>
                        </div>
                    </div>

                    <!-- Settings -->
                    <div class="config-section">
                        <h3>Settings</h3>
                        
                        <div class="setting-group">
                            <label>Transport Protocol</label>
                            <div class="radio-group" id="transport-group">
                                <label class="radio-label">
                                    <input type="radio" name="transport" value="udp" checked>
                                    <span>UDP</span>
                                </label>
                                <label class="radio-label">
                                    <input type="radio" name="transport" value="tcp">
                                    <span>TCP</span>
                                </label>
                                <label class="radio-label">
                                    <input type="radio" name="transport" value="dot">
                                    <span>DoT</span>
                                </label>
                                <label class="radio-label">
                                    <input type="radio" name="transport" value="doh">
                                    <span>DoH</span>
                                </label>
                            </div>
                        </div>

                        <div class="setting-group">
                            <label>Test Mode</label>
                            <select id="test-mode" class="select-input">
                                <option value="cold">Cold Start (Cache Bypass)</option>
                                <option value="warm">Warm Cache</option>
                                <option value="burst">Burst (Parallel Load)</option>
                            </select>
                        </div>

                        <div class="setting-row">
                            <div class="setting-group">
                                <label>Domains</label>
                                <input type="number" id="domains" class="number-input" value="30" min="5" max="100">
                            </div>
                            <div class="setting-group">
                                <label>Runs</label>
                                <input type="number" id="runs" class="number-input" value="2" min="1" max="10">
                            </div>
                            <div class="setting-group">
                                <label>Parallel</label>
                                <input type="number" id="parallel" class="number-input" value="10" min="1" max="50">
                            </div>
                        </div>
                    </div>
                </div>

                <button class="btn btn-primary btn-large" id="start-btn" onclick="startBenchmark()">
                    <span class="btn-icon">üöÄ</span>
                    Start Benchmark
                </button>
            </section>

            <!-- Progress Section -->
            <section class="progress-section glass-card" id="progress-section" style="display: none;">
                <h2>Progress</h2>
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
                    </div>
                    <div class="progress-text">
                        <span id="progress-percent">0%</span>
                        <span id="progress-message">Initializing...</span>
                    </div>
                </div>
            </section>

            <!-- Results Section -->
            <section class="results-section" id="results-section" style="display: none;">
                <!-- Winner Card -->
                <div class="winner-card glass-card" id="winner-card">
                    <div class="winner-badge">üèÜ</div>
                    <h2>Winner</h2>
                    <div class="winner-name" id="winner-name">-</div>
                    <div class="winner-stats">
                        <div class="winner-stat">
                            <span class="stat-value" id="winner-avg">-</span>
                            <span class="stat-label">Avg Latency</span>
                        </div>
                        <div class="winner-stat">
                            <span class="stat-value" id="winner-success">-</span>
                            <span class="stat-label">Success Rate</span>
                        </div>
                    </div>
                </div>

                <!-- Chart -->
                <div class="chart-card glass-card">
                    <h2>Latency Comparison</h2>
                    <div class="chart-container">
                        <canvas id="latency-chart"></canvas>
                    </div>
                </div>

                <!-- Stats Table -->
                <div class="stats-card glass-card">
                    <h2>Detailed Statistics</h2>
                    <div class="table-container">
                        <table class="stats-table" id="stats-table">
                            <thead>
                                <tr>
                                    <th>Resolver</th>
                                    <th>Queries</th>
                                    <th>Success</th>
                                    <th>Avg (ms)</th>
                                    <th>p95 (ms)</th>
                                    <th>p99 (ms)</th>
                                    <th>Jitter</th>
                                </tr>
                            </thead>
                            <tbody id="stats-body">
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Export Buttons -->
                <div class="export-section">
                    <button class="btn btn-secondary" onclick="exportJSON()">
                        üìÑ Export JSON
                    </button>
                    <button class="btn btn-secondary" onclick="copyResults()">
                        üìã Copy Results
                    </button>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>DNS Speed Checker v1.0 ‚Äî Measuring real DNS performance, not ping times</p>
        </footer>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
